(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{1658:function(e,t,n){"use strict";var a=n(164),i=n.n(a);t.a=i.a},2051:function(e,t,n){"use strict";n.r(t);var a,i=n(4),l=n(113),r=n(7),o=n(8),c=n(10),s=n(9),d=n(11),u=n(52),p=n(0),m=n.n(p),f=n(137),h=n(41),b=n(80),g=n(581),y=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.price,n=e.quantity,a=e._highlightResult.name.value,i=(t*n).toFixed(2),l=a?a.substring(0,30):"";return m.a.createElement("div",{className:"singleOrderInfo"},m.a.createElement("p",null,m.a.createElement("span",null,l),m.a.createElement("span",null,"x"),m.a.createElement("span",{className:"quantity"},n)),m.a.createElement("span",{className:"totalPrice"},"$",i))}}]),t}(p.Component),x=n(164),k=n.n(x);var w=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(s.a)(t).call(this,e))).handleChange=function(e){return function(e){console.log("Done"),n.setState({staff:e.target.value,validating:!1}),n.props.notifyChange&&(n.props.notifyChange("recp_staff_id",e.target.id),n.props.notifyChange("staffName",e.target.value))}},n.handleChangeDate=function(e){return function(e){n.setState({checkoutDate:e.target.value,validating:!1}),n.props.notifyChange&&n.props.notifyChange("recp_timestamp",e.target.value)}},n.handleClicked=function(){console.log(n.props.products),""!==n.state.staff&&n.state.staff?n.props.notifyCheckout():n.setState({validating:!0})},n.renderProducts=n.renderProducts.bind(Object(u.a)(Object(u.a)(n))),n.state={validating:!1,staff:""},n}return Object(d.a)(t,e),Object(o.a)(t,[{key:"renderProducts",value:function(){var e=this.props,t=e.productQuantity,n=e.products;return a=0,t.map(function(e){return a+=e.quantity*n[e.objectID].price,m.a.createElement(y,Object.assign({key:e.objectID,quantity:e.quantity},n[e.objectID]))})}},{key:"render",value:function(){return m.a.createElement("div",{className:"orderInfo"},m.a.createElement("div",{className:"orderTable"},m.a.createElement("div",{className:"orderTableHead"},m.a.createElement("span",{className:"tableHead"},"Product"),m.a.createElement("span",{className:"tableHead"},"Total")),m.a.createElement("div",{className:"orderTableBody"},this.renderProducts()),m.a.createElement("div",{className:"orderTableFooter"},m.a.createElement("span",null,"Total"),m.a.createElement("span",null,"$",a.toFixed(2))),m.a.createElement(g.a,{config:"staffs",label:"Staff",value:this.state.staff?this.state.staff:"",error:this.state.validating,onChange:this.handleChange("staffs")}),m.a.createElement(k.a,{style:{marginTop:"5px",marginBottom:"5px"},fullWidth:!0,id:"dateCheckout",label:"Date",type:"datetime-local",onChange:this.handleChangeDate("table"),value:this.state.checkoutDate?this.state.checkoutDate:function(){var e=(new Date).toISOString();return e=e.substring(0,e.indexOf("."))}(),InputLabelProps:{shrink:!0}}),m.a.createElement(b.a,{disabled:0===this.props.productQuantity.length,variant:"raised",color:"primary",className:"orderBtn",onClick:this.handleClicked},"Place Order"),m.a.createElement(b.a,{onClick:this.props.clearCart},"Next Order")))}}]),t}(p.Component);var v=Object(h.b)(function(e){return Object(i.a)({},e.Ecommerce)})(w),j=n(17),C=n(16),O=n(1658);function E(){var e=Object(j.a)(["\n  display: flex;\n  flex-wrap: wrap;\n\n  .menu {\n    width: 200px;\n  }\n"]);return E=function(){return e},e}function N(){var e=Object(j.a)(["\n  margin: 0 8px 16px;\n  \n"]);return N=function(){return e},e}var _=Object(C.b)(O.a)(N()),F=C.b.form(E()),S=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return(n=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(i)))).state={name:"",email:"",multiline:"Controlled"},n.handleChange=function(e){return function(t){console.log(n.props.notifyChange),n.props.notifyChange&&n.props.notifyChange(e,t.target.value)}},n}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return m.a.createElement(F,{noValidate:!0,autoComplete:"off"},m.a.createElement(_,{required:!0,fullWidth:!0,id:"fullName",className:"firstNameField billingFormField",label:"Full Name",margin:"normal",value:this.state.name,onChange:function(t){e.setState({name:t.target.value}),e.handleChange("recp_customer")(t)}}),m.a.createElement("br",null),m.a.createElement(_,{required:!0,fullWidth:!0,id:"email",className:"emailField billingFormField",label:"Email Address",type:"email",margin:"normal",value:this.state.email,onChange:function(t){e.setState({email:t.target.value}),e.handleChange("recp_customer_email")(t)}}))}}]),t}(m.a.Component),D=n(237),I=n(246),T=n(212),P=n.n(T),q=n(54),z=n(461),B=n.n(z),W=n(44),H=n(14),A=n(79);function Q(){var e=Object(j.a)(["\n  h3.sectionTitle {\n    font-size: 16px;\n    font-weight: 500;\n    color: ",";\n    padding: 0 7px;\n  }\n\n  form {\n    padding-right: 20px;\n\n    @media only screen and (min-width: 768px) and (max-width: 991px) {\n      padding-right: 0;\n    }\n\n    @media only screen and (max-width: 767px) {\n      padding-right: 0;\n    }\n\n    .fullColumnWidth {\n      width: 100%;\n    }\n\n    .billingFormField {\n      margin-bottom: 20px;\n\n      @media only screen and (min-width: 768px) and (max-width: 991px) {\n        width: 100%;\n      }\n\n      @media only screen and (max-width: 767px) {\n        width: 100%;\n      }\n\n      label {\n        font-size: 0.9rem;\n        color: ",";\n      }\n\n      > div {\n        input {\n          height: 1.65em;\n        }\n      }\n\n      &.selectField {\n        > div > div > div {\n          height: calc(1em + 14px);\n          font-size: 0.9rem;\n        }\n      }\n    }\n  }\n\n  .orderInfo {\n    width: 100%;\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-flex-direction: column;\n    -ms-flex-direction: column;\n    flex-direction: column;\n\n    .orderTableHead {\n      width: 100%;\n      display: -webkit-box;\n      display: -webkit-flex;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-pack: justify;\n      -webkit-justify-content: space-between;\n      -ms-flex-pack: justify;\n      justify-content: space-between;\n      -webkit-align-items: center;\n      -webkit-box-align: center;\n      -ms-flex-align: center;\n      align-items: center;\n      margin-bottom: 20px;\n\n      span.tableHead {\n        font-size: 15px;\n        font-weight: 500;\n        color: ",";\n        line-height: 1.2;\n      }\n    }\n\n    .orderTableBody {\n      width: 100%;\n      display: -webkit-box;\n      display: -webkit-flex;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-flex-direction: column;\n      -ms-flex-direction: column;\n      flex-direction: column;\n      margin-bottom: 10px;\n\n      .singleOrderInfo {\n        width: 100%;\n        display: -webkit-box;\n        display: -webkit-flex;\n        display: -ms-flexbox;\n        display: flex;\n        -webkit-box-pack: justify;\n        -webkit-justify-content: space-between;\n        -ms-flex-pack: justify;\n        justify-content: space-between;\n        -webkit-align-items: center;\n        -webkit-box-align: center;\n        -ms-flex-align: center;\n        align-items: center;\n        padding: 10px 0;\n        border-bottom: 1px solid ",";\n\n        p {\n          margin: 0;\n\n          span {\n            font-size: 13px;\n            font-weight: 400;\n            color: ",";\n            line-height: 1.5;\n            padding: 0 3px;\n            display: inline-block;\n          }\n\n          span.quantity {\n            font-size: 13px;\n            font-weight: 400;\n            color: ",";\n            line-height: 1.5;\n            display: inline-block;\n          }\n        }\n\n        .totalPrice {\n          font-size: 13px;\n          font-weight: 500;\n          color: ",";\n          line-height: 1.5;\n        }\n      }\n    }\n\n    .orderTableFooter {\n      width: 100%;\n      display: -webkit-box;\n      display: -webkit-flex;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-pack: justify;\n      -webkit-justify-content: space-between;\n      -ms-flex-pack: justify;\n      justify-content: space-between;\n      -webkit-align-items: center;\n      -webkit-box-align: center;\n      -ms-flex-align: center;\n      align-items: center;\n      margin-bottom: 40px;\n\n      span {\n        font-size: 14px;\n        font-weight: 500;\n        color: ",";\n        line-height: 1.2;\n      }\n    }\n\n    .orderBtn {\n      width: 100%;\n    }\n  }\n"]);return Q=function(){return e},e}var J=C.b.div(Q(),Object(H.palette)("grey",9),Object(H.palette)("grey",8),Object(H.palette)("grey",8),Object(H.palette)("grey",3),Object(H.palette)("grey",5),Object(H.palette)("grey",8),Object(H.palette)("grey",5),Object(H.palette)("grey",8)),R=Object(A.a)(J);var $=q.a.checkout,L=q.a.clearCart,V=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(i)))).state={loading:!1,timestamp:function(){var e=(new Date).toISOString();return e=e.substring(0,e.indexOf("."))}()},n.handleChanged=function(e,t){n.setState(Object(l.a)({},e,t))},n.handleCheckout=function(){var e=Object(u.a)(Object(u.a)(n));0!==n.props.productQuantity.length?navigator.geolocation.getCurrentPosition(function(t){var n=t.coords.latitude,a=t.coords.longitude,i={customerEmail:e.state.recp_customer_email,customerName:e.state.recp_customer,longitude:a,latitude:n,staff_id:e.state.recp_staff_id,staffName:e.state.staffName,sales:[],timestamp:e.state.recp_timestamp};e.props.productQuantity.forEach(function(t){var n=e.props.products[t.objectID],a=t.quantity;i.sales.push({inventoryId:n.inventoryID,sale_inv_id:n.inventoryID,sale_price:n.price,sale_total_purchase:a,prod_name:n.name})}),console.log("items",i),console.log("Checkout",e.props.checkout),e.props.checkout(i),e.setState({loading:!0})}):P()("Failed to Checkout","Cannot checkout an empty cart!","error")},n}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(e){console.log(e),e.success&&!this.props.success?(this.setState({loading:!1}),P()("Checkout Completed Successfully","Successfully Checkout the Cart, your items have been sold","success")):!e.success&&this.state.loading&&(this.setState({loading:!1}),P()("Failed to Checkout","Failed to checkout, internal error : "+e.message,"error"))}},{key:"render",value:function(){return m.a.createElement(D.a,null,m.a.createElement(R,{className:"checkoutPageWrapper"},m.a.createElement(B.a,{style:{display:this.state.loading?"block":"none"}}),m.a.createElement(W.d,null,m.a.createElement(W.b,null,m.a.createElement(I.a,null,m.a.createElement("h3",{className:"sectionTitle"},"Billing details"),m.a.createElement(S,{notifyChange:this.handleChanged}))),m.a.createElement(W.b,null,m.a.createElement(I.a,null,m.a.createElement(v,{notifyChange:this.handleChanged,clearCart:this.props.clearCart,checkingOut:this.state.loading,notifyCheckout:this.handleCheckout}))))))}}]),t}(m.a.Component);t.default=Object(h.b)(function(e){return Object(i.a)({},e.App,e.Ecommerce)},{checkout:$,clearCart:L})(Object(f.withStyles)(function(e){return{}},{withTheme:!0})(V))}}]);
//# sourceMappingURL=14.36ae4e1a.chunk.js.map