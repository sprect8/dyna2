{"version":3,"sources":["containers/ReceiptManage/index.js"],"names":["loadData","actions","saveData","updateData","deleteData","openToEdit","openForNew","closedEditBox","formModified","receipts","tableName","displayName","key","display","description","columns","name","type","sequence","mandatory","unique","ref","disabled","uuid","latitude","longitude","MasterView","state","open","records","sel","loadingRows","componentDidMount","_this","props","componentWillReceiveProps","deleting","success","swal","message","console","log","rows","setState","updating","error","saved","loaded","selectedData","handleClickOpen","data","forEach","x","handleClose","handleEditRow","row","handleUpdate","record","handleDeleteRow","config","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","_components_utility_layoutWrapper__WEBPACK_IMPORTED_MODULE_7__","_components_utility_rowColumn__WEBPACK_IMPORTED_MODULE_9__","_material_ui_core_LinearProgress__WEBPACK_IMPORTED_MODULE_19___default","style","this","_components_utility_papersheet__WEBPACK_IMPORTED_MODULE_8__","title","_components_uielements_button__WEBPACK_IMPORTED_MODULE_10__","onClick","variant","color","aria-label","float","marginRight","marginLeft","_components_uielements_icon__WEBPACK_IMPORTED_MODULE_11__","_components_masterdetail_tableview__WEBPACK_IMPORTED_MODULE_13__","editRow","deleteRow","_components_masterdetail_historyview__WEBPACK_IMPORTED_MODULE_15__","_components_masterdetail_formedit__WEBPACK_IMPORTED_MODULE_14__","updateError","updateSuccess","onClose","onUpdate","React","Component","appConect","connect","Object","C_dev_dyna2_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","MasterDetailsReducer"],"mappings":"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","file":"static/js/16.d829cb31.chunk.js","sourcesContent":["import React from 'react';\r\nimport LayoutWrapper from '../../components/utility/layoutWrapper';\r\nimport Papersheet from '../../components/utility/papersheet';\r\nimport { FullColumn } from '../../components/utility/rowColumn';\r\nimport Button from '../../components/uielements/button';\r\nimport Icon from '../../components/uielements/icon';\r\nimport swal from 'sweetalert2';\r\n\r\nimport TableView from '../../components/masterdetail/tableview';\r\nimport FormEditView from '../../components/masterdetail/formedit';\r\nimport HistoryView from '../../components/masterdetail/historyview';\r\n\r\nimport 'react-vertical-timeline-component/style.min.css';\r\nimport actions from '../../redux/masterdetails/actions';\r\nimport { connect } from 'react-redux';\r\nimport LinearProgress from '@material-ui/core/LinearProgress';\r\n\r\n/**\r\n * This tool is for data entry into the system based on an underlying database model \r\n **/\r\n\r\nconst { loadData, saveData, updateData, deleteData, openToEdit, openForNew, closedEditBox, formModified } = actions;\r\n\r\n\r\nconst receipts = {\r\n    \"tableName\": \"receipts\",\r\n    \"displayName\": \"Receipts Records\",\r\n    \"key\": \"recp_id\",\r\n    \"display\": \"recp_id\",\r\n    \"description\": \"These are your Receipt records, edit, add, remove and view any details\",\r\n    \"columns\": [\r\n      { \"name\": \"recp_id\", \"display\": \"Receipts Id\", \"type\": \"number\", \"sequence\": \"recp_id_seq\", \"mandatory\": true, \"unique\": true, \"key\": true },\r\n      { \"name\": \"recp_staff_id\", \"display\": \"Staff\", \"type\": \"number\", \"mandatory\": true, \"ref\": \"staffs\" },\r\n      { \"name\": \"recp_uuid\", \"display\": \"Unique ID\", \"type\": \"text\", \"mandatory\": true, disabled: true, \"uuid\": true },\r\n      { \"name\": \"recp_latitude\", \"display\": \"Latitude\", \"type\": \"number\", disabled: true, \"latitude\": true},\r\n      { \"name\": \"recp_longitude\", \"display\": \"Longitude\", \"type\": \"number\", disabled: true, \"longitude\": true},\r\n      { \"name\": \"recp_customer\", \"display\": \"Customer Name\", \"type\": \"text\", \"mandatory\": true },\r\n      { \"name\": \"recp_customer_email\", \"display\": \"Customer Email\", \"type\": \"text\", \"mandatory\": true },\r\n      { \"name\": \"recp_timestamp\", \"display\": \"Receipt Date\", \"type\": \"timestamp\", \"mandatory\": true },\r\n      { \"name\": \"items\", \"display\": \"Sold Items\", \"type\": \"mdview\"}\r\n    ]\r\n  }\r\n\r\nclass MasterView extends React.Component {\r\n\tstate = {\r\n\t\topen: false,\r\n\t\trecords: [],\r\n\t\tsel: {},\r\n\t\tloadingRows: true,\r\n\t};\r\n\r\n\tcomponentDidMount = () => {\r\n\t\tthis.props.loadData(receipts);\r\n\t}\r\n\r\n\tcomponentWillReceiveProps = (props) => {\r\n\r\n\t\tif (this.deleting && props.success) {\r\n\t\t\tswal(\r\n\t\t\t\t'Deleted!',\r\n\t\t\t\t'Your row has been deleted.',\r\n\t\t\t\t'success'\r\n\t\t\t)\r\n\t\t}\r\n\t\tif (this.deleting && !props.success) {\r\n\t\t\tswal(\r\n\t\t\t\t'Failed to Deleted!',\r\n\t\t\t\t'Your row has not been deleted. Error was ' + props.message,\r\n\t\t\t\t'error'\r\n\t\t\t)\r\n\t\t}\r\n\r\n\t\tthis.deleting = false;\r\n\r\n\t\tconsole.log(props);\r\n\t\tif (props.rows) {\r\n\r\n\t\t\tthis.setState({ records: props.rows, loadingRows: false })\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.setState({ records: [] })\r\n\t\t}\r\n\r\n\t\tif (this.updating) {\r\n\t\t\t// check error\r\n\t\t\tlet error = props.message;\r\n\t\t\tlet saved = !error;\r\n\r\n\t\t\tthis.setState({ saved, error, message: props.message })\r\n\t\t}\r\n\t\tthis.updating = false;\r\n\r\n\t\tif (this.props.loaded !== props.loaded && props.loaded && props.selectedData) {\r\n\t\t\tthis.setState({ open: true, sel: props.selectedData });\r\n\t\t}\r\n\t}\r\n\r\n\thandleClickOpen = () => {\r\n\t\t// clear items\r\n\t\tlet data = {};\r\n\t\treceipts.columns.forEach(x => {\r\n\t\t\tdata[x.name] = \"\";\r\n\t\t});\r\n\t\tdata[receipts.key] = null;\r\n\t\t//this.setState({ open: true, sel: data });\r\n\t\tthis.props.openForNew(data);\r\n\t};\r\n\r\n\thandleClose = () => {\r\n\t\tthis.props.closedEditBox();\r\n\t\tthis.setState({ open: false });\r\n\r\n\t};\r\n\r\n\thandleEditRow = (row) => {\r\n\t\t//this.setState({open: true, sel: row});\r\n\t\tthis.props.openToEdit(row);\r\n\t}\r\n\r\n\thandleUpdate = (record) => {\r\n\t\tconsole.log(this.props.saveData);\r\n\t\tthis.props.formModified();\r\n\t\tthis.updating = true;\r\n\t\tthis.props.saveData(receipts, record);\r\n\t\t//let st = this.state.records;\r\n\t\t//st.push(record);\r\n\t\t//this.setState({records:st, open: false});\r\n\t}\r\n\r\n\thandleDeleteRow = (record) => {\r\n\t\tlet key = record[receipts.key];\r\n\t\tconsole.log(key);\r\n\t\tthis.props.deleteData(receipts, key);\r\n\t\tthis.deleting = true;\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet config = receipts;\r\n\t\treturn (<LayoutWrapper>\r\n\r\n\t\t\t<FullColumn>\r\n\t\t\t\t<LinearProgress style={{ display: this.state.loadingRows ? \"block\" : \"none\" }} />\r\n\r\n\r\n\t\t\t\t<Papersheet title={config.displayName}>\r\n\r\n\t\t\t\t\tClick Row to Edit\r\n\r\n\t\t\t\t\t<Button onClick={this.handleClickOpen} variant=\"fab\" color=\"primary\" aria-label=\"add\" style={{ \"float\": \"right\", \"marginRight\": \"auto\", \"marginLeft\": \"8px\" }}><Icon>add</Icon></Button>\r\n\r\n\t\t\t\t\t<TableView config={config} data={this.state.records} editRow={this.handleEditRow} deleteRow={this.handleDeleteRow} />\r\n\t\t\t\t</Papersheet>\r\n\t\t\t</FullColumn>\r\n\t\t\t<FullColumn>\r\n\t\t\t\t<HistoryView config={config} data={this.state.records} />\r\n\t\t\t</FullColumn>\r\n\t\t\t<FormEditView config={config} open={this.state.open}\r\n\t\t\t\tupdateError={this.state.error}\r\n\t\t\t\tupdateSuccess={this.state.saved}\r\n\t\t\t\tmessage={this.state.message}\r\n\r\n\t\t\t\tonClose={this.handleClose}\r\n\t\t\t\tonUpdate={this.handleUpdate}\r\n\t\t\t\tdata={this.state.sel} />\r\n\t\t</LayoutWrapper>\r\n\t\t)\r\n\t}\r\n};\r\n\r\nconst appConect = connect(\r\n\tstate => ({\r\n\t\t...state.MasterDetailsReducer,\r\n\t}),\r\n\t{ loadData, updateData, saveData, deleteData, openToEdit, openForNew, closedEditBox, formModified}\r\n)(MasterView);\r\nexport default appConect;\r\n\r\n"],"sourceRoot":""}