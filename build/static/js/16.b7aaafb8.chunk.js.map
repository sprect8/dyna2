{"version":3,"sources":["containers/ReceiptManage/index.js"],"names":["loadData","actions","saveData","updateData","deleteData","openToEdit","openForNew","closedEditBox","formModified","receipts","tableName","displayName","key","display","description","columns","name","type","sequence","mandatory","unique","ref","disabled","uuid","latitude","longitude","MasterView","state","open","records","sel","loadingRows","componentDidMount","_this","props","componentWillReceiveProps","deleting","success","swal","message","console","log","rows","setState","updating","error","saved","loaded","selectedData","handleClickOpen","data","forEach","x","handleClose","handleEditRow","row","handleUpdate","record","handleDeleteRow","config","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","_components_utility_layoutWrapper__WEBPACK_IMPORTED_MODULE_7__","_components_utility_rowColumn__WEBPACK_IMPORTED_MODULE_9__","_material_ui_core_LinearProgress__WEBPACK_IMPORTED_MODULE_19___default","style","this","_components_utility_papersheet__WEBPACK_IMPORTED_MODULE_8__","title","_components_uielements_button__WEBPACK_IMPORTED_MODULE_10__","onClick","variant","color","aria-label","float","marginRight","marginLeft","_components_uielements_icon__WEBPACK_IMPORTED_MODULE_11__","_components_masterdetail_tableview__WEBPACK_IMPORTED_MODULE_13__","editRow","deleteRow","_components_masterdetail_historyview__WEBPACK_IMPORTED_MODULE_15__","_components_masterdetail_formedit__WEBPACK_IMPORTED_MODULE_14__","updateError","updateSuccess","onClose","onUpdate","React","Component","appConect","connect","Object","_Users_hc834bq_dev_dyna2_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","MasterDetailsReducer"],"mappings":"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","file":"static/js/16.b7aaafb8.chunk.js","sourcesContent":["import React from 'react';\nimport LayoutWrapper from '../../components/utility/layoutWrapper';\nimport Papersheet from '../../components/utility/papersheet';\nimport { FullColumn } from '../../components/utility/rowColumn';\nimport Button from '../../components/uielements/button';\nimport Icon from '../../components/uielements/icon';\nimport swal from 'sweetalert2';\n\nimport TableView from '../../components/masterdetail/tableview';\nimport FormEditView from '../../components/masterdetail/formedit';\nimport HistoryView from '../../components/masterdetail/historyview';\n\nimport 'react-vertical-timeline-component/style.min.css';\nimport actions from '../../redux/masterdetails/actions';\nimport { connect } from 'react-redux';\nimport LinearProgress from '@material-ui/core/LinearProgress';\n\n/**\n * This tool is for data entry into the system based on an underlying database model \n **/\n\nconst { loadData, saveData, updateData, deleteData, openToEdit, openForNew, closedEditBox, formModified } = actions;\n\n\nconst receipts = {\n    \"tableName\": \"receipts\",\n    \"displayName\": \"Receipts Records\",\n    \"key\": \"recp_id\",\n    \"display\": \"recp_id\",\n    \"description\": \"These are your Receipt records, edit, add, remove and view any details\",\n    \"columns\": [\n      { \"name\": \"recp_id\", \"display\": \"Receipts Id\", \"type\": \"number\", \"sequence\": \"recp_id_seq\", \"mandatory\": true, \"unique\": true, \"key\": true },\n      { \"name\": \"recp_staff_id\", \"display\": \"Staff\", \"type\": \"number\", \"mandatory\": true, \"ref\": \"staffs\" },\n      { \"name\": \"recp_uuid\", \"display\": \"Unique ID\", \"type\": \"text\", \"mandatory\": true, disabled: true, \"uuid\": true },\n      { \"name\": \"recp_latitude\", \"display\": \"Latitude\", \"type\": \"number\", disabled: true, \"latitude\": true},\n      { \"name\": \"recp_longitude\", \"display\": \"Longitude\", \"type\": \"number\", disabled: true, \"longitude\": true},\n      { \"name\": \"recp_customer\", \"display\": \"Customer Name\", \"type\": \"text\", \"mandatory\": true },\n      { \"name\": \"recp_customer_email\", \"display\": \"Customer Email\", \"type\": \"text\", \"mandatory\": true },\n      { \"name\": \"recp_timestamp\", \"display\": \"Receipt Date\", \"type\": \"timestamp\", \"mandatory\": true },\n      { \"name\": \"items\", \"display\": \"Sold Items\", \"type\": \"mdview\"}\n    ]\n  }\n\nclass MasterView extends React.Component {\n\tstate = {\n\t\topen: false,\n\t\trecords: [],\n\t\tsel: {},\n\t\tloadingRows: true,\n\t};\n\n\tcomponentDidMount = () => {\n\t\tthis.props.loadData(receipts);\n\t}\n\n\tcomponentWillReceiveProps = (props) => {\n\n\t\tif (this.deleting && props.success) {\n\t\t\tswal(\n\t\t\t\t'Deleted!',\n\t\t\t\t'Your row has been deleted.',\n\t\t\t\t'success'\n\t\t\t)\n\t\t}\n\t\tif (this.deleting && !props.success) {\n\t\t\tswal(\n\t\t\t\t'Failed to Deleted!',\n\t\t\t\t'Your row has not been deleted. Error was ' + props.message,\n\t\t\t\t'error'\n\t\t\t)\n\t\t}\n\n\t\tthis.deleting = false;\n\n\t\tconsole.log(props);\n\t\tif (props.rows) {\n\n\t\t\tthis.setState({ records: props.rows, loadingRows: false })\n\t\t}\n\t\telse {\n\t\t\tthis.setState({ records: [] })\n\t\t}\n\n\t\tif (this.updating) {\n\t\t\t// check error\n\t\t\tlet error = props.message;\n\t\t\tlet saved = !error;\n\n\t\t\tthis.setState({ saved, error, message: props.message })\n\t\t}\n\t\tthis.updating = false;\n\n\t\tif (this.props.loaded !== props.loaded && props.loaded && props.selectedData) {\n\t\t\tthis.setState({ open: true, sel: props.selectedData });\n\t\t}\n\t}\n\n\thandleClickOpen = () => {\n\t\t// clear items\n\t\tlet data = {};\n\t\treceipts.columns.forEach(x => {\n\t\t\tdata[x.name] = \"\";\n\t\t});\n\t\tdata[receipts.key] = null;\n\t\t//this.setState({ open: true, sel: data });\n\t\tthis.props.openForNew(data);\n\t};\n\n\thandleClose = () => {\n\t\tthis.props.closedEditBox();\n\t\tthis.setState({ open: false });\n\n\t};\n\n\thandleEditRow = (row) => {\n\t\t//this.setState({open: true, sel: row});\n\t\tthis.props.openToEdit(row);\n\t}\n\n\thandleUpdate = (record) => {\n\t\tconsole.log(this.props.saveData);\n\t\tthis.props.formModified();\n\t\tthis.updating = true;\n\t\tthis.props.saveData(receipts, record);\n\t\t//let st = this.state.records;\n\t\t//st.push(record);\n\t\t//this.setState({records:st, open: false});\n\t}\n\n\thandleDeleteRow = (record) => {\n\t\tlet key = record[receipts.key];\n\t\tconsole.log(key);\n\t\tthis.props.deleteData(receipts, key);\n\t\tthis.deleting = true;\n\t}\n\n\trender() {\n\t\tlet config = receipts;\n\t\treturn (<LayoutWrapper>\n\n\t\t\t<FullColumn>\n\t\t\t\t<LinearProgress style={{ display: this.state.loadingRows ? \"block\" : \"none\" }} />\n\n\n\t\t\t\t<Papersheet title={config.displayName}>\n\n\t\t\t\t\tClick Row to Edit\n\n\t\t\t\t\t<Button onClick={this.handleClickOpen} variant=\"fab\" color=\"primary\" aria-label=\"add\" style={{ \"float\": \"right\", \"marginRight\": \"auto\", \"marginLeft\": \"8px\" }}><Icon>add</Icon></Button>\n\n\t\t\t\t\t<TableView config={config} data={this.state.records} editRow={this.handleEditRow} deleteRow={this.handleDeleteRow} />\n\t\t\t\t</Papersheet>\n\t\t\t</FullColumn>\n\t\t\t<FullColumn>\n\t\t\t\t<HistoryView config={config} data={this.state.records} />\n\t\t\t</FullColumn>\n\t\t\t<FormEditView config={config} open={this.state.open}\n\t\t\t\tupdateError={this.state.error}\n\t\t\t\tupdateSuccess={this.state.saved}\n\t\t\t\tmessage={this.state.message}\n\n\t\t\t\tonClose={this.handleClose}\n\t\t\t\tonUpdate={this.handleUpdate}\n\t\t\t\tdata={this.state.sel} />\n\t\t</LayoutWrapper>\n\t\t)\n\t}\n};\n\nconst appConect = connect(\n\tstate => ({\n\t\t...state.MasterDetailsReducer,\n\t}),\n\t{ loadData, updateData, saveData, deleteData, openToEdit, openForNew, closedEditBox, formModified}\n)(MasterView);\nexport default appConect;\n\n"],"sourceRoot":""}