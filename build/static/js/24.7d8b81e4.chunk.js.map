{"version":3,"sources":["containers/Settings/index.js"],"names":["loadUserSettings","actions","saveUserSettings","saveCompanySettings","settings","tableName","displayName","key","display","description","columns","name","type","sequence","mandatory","unique","disabled","lov","users","NORMAL","SAVING","ERROR","SAVED","Settings","state","open","user","newPass","reenterPass","statusDetails","statusCompany","validating","validatingUser","status","_this","validate","personal","undefined","company","componentDidMount","props","componentWillUnmount","console","log","componentWillReceiveProps","profile","user_id","setState","companyValid","sett_company_name","success","swal","message","handleClose","handleUpdate","value","handleUpdateCompany","handleSave","handleSaveUser","Object","_home_zain_Projects_TM_dyna_dyna2_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__","user_password","_this2","this","loading","successSettings","error","errorSettings","classes","buttonClassname","classNames","buttonSuccess","react__WEBPACK_IMPORTED_MODULE_7___default","a","createElement","_components_utility_layoutWrapper__WEBPACK_IMPORTED_MODULE_8__","_components_utility_rowColumn__WEBPACK_IMPORTED_MODULE_9__","_components_masterdetail_formedit__WEBPACK_IMPORTED_MODULE_20__","config","updateError","updateSuccess","saved","notifyValid","onClose","onUpdate","updateValue","data","isPanel","_material_ui_core__WEBPACK_IMPORTED_MODULE_25__","id","fullWidth","label","onChange","e","target","InputLabelProps","shrink","style","position","_components_uielements_button__WEBPACK_IMPORTED_MODULE_10__","marginTop","marginLeft","variant","color","className","onClick","_material_ui_icons_Check__WEBPACK_IMPORTED_MODULE_16___default","_material_ui_icons_Cancel__WEBPACK_IMPORTED_MODULE_18___default","_material_ui_icons_Save__WEBPACK_IMPORTED_MODULE_17___default","_material_ui_core_CircularProgress__WEBPACK_IMPORTED_MODULE_13___default","size","fabProgress","left","bottom","React","Component","appConect","connect","_home_zain_Projects_TM_dyna_dyna2_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","MasterDetailsReducer","withStyles","theme","root","alignItems","wrapper","margin","spacing","unit","backgroundColor","green","&:hover","buttonFailed","red","right","zIndex","buttonProgress","top"],"mappings":"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","file":"static/js/24.7d8b81e4.chunk.js","sourcesContent":["import React from 'react';\nimport LayoutWrapper from '../../components/utility/layoutWrapper';\nimport { FullColumn } from '../../components/utility/rowColumn';\nimport Button from '../../components/uielements/button';\nimport Icon from '../../components/uielements/icon';\nimport swal from 'sweetalert2';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport green from '@material-ui/core/colors/green';\nimport red from '@material-ui/core/colors/red';\nimport CheckIcon from '@material-ui/icons/Check';\nimport SaveIcon from '@material-ui/icons/Save';\nimport CrossIcon from '@material-ui/icons/Cancel';\nimport { withStyles } from '@material-ui/core/styles';\nimport FormEditView from '../../components/masterdetail/formedit';\n\n\nimport 'react-vertical-timeline-component/style.min.css';\nimport actions from '../../redux/masterdetails/actions';\nimport { connect } from 'react-redux';\nimport classNames from 'classnames';\nimport { TextField } from '@material-ui/core';\n\n/**\n * This tool is for data entry into the system based on an underlying database model \n **/\n\nconst { loadUserSettings, saveUserSettings, saveCompanySettings } = actions;\n\n/**\n * Username First Name Last Name\n * Company Name Company Industry\n * Company Motto Company Phone Company Email\n * Company Logo\n * \n * Password settings\n */\n\nconst settings = {\n\t\"tableName\": \"settings\",\n\t\"displayName\": \"Settings table\",\n\t\"key\": \"cate_id\",\n\t\"display\": \"cate_name\",\n\t\"description\": \"Settings Table\",\n\t\"columns\": [\n\t\t{ \"name\": \"sett_id\", \"display\": \"Setting ID\", \"type\": \"number\", \"sequence\": \"cate_id_seq\", \"mandatory\": true, \"unique\": true, \"key\": true },\n\t\t{ \"name\": \"sett_user_id\", \"display\": \"User ID\", \"type\": \"number\", \"mandatory\": true, \"unique\": true, \"disabled\": true },\n\t\t{ \"name\": \"sett_company_name\", \"display\": \"Company Name\", \"type\": \"text\", \"mandatory\": true },\n\t\t{ \"name\": \"sett_company_logo\", \"display\": \"Logo\", \"type\": \"picture\" },\n\t\t{ \"name\": \"sett_company_motto\", \"display\": \"Motto\", \"type\": \"text\" },\n\t\t{ \"name\": \"sett_company_email\", \"display\": \"Email\", \"type\": \"text\" },\n\t\t{ \"name\": \"sett_company_phone\", \"display\": \"Phone\", \"type\": \"text\" },\n\t\t{ \"name\": \"sett_indt_id\", \"display\": \"Industry\", \"type\": \"text\", \"lov\": [\"Food and Beverage\", \"Clothing\", \"Local Spa\", \"Beauty Products\", \"Retail\"] }\n\t]\n}\n\nconst users = {\n\t\"tableName\": \"users\",\n\t\"displayName\": \"Users Records\",\n\t\"description\": \"System User\",\n\t\"columns\": [\n\t\t{ \"name\": \"user_id\", \"display\": \"User Id\", \"type\": \"number\", \"sequence\": \"user_id_seq\", \"mandatory\": true, \"unique\": true, \"key\": true },\n\t\t{ \"name\": \"user_fname\", \"display\": \"First Name\", \"type\": \"text\", \"mandatory\": true },\n\t\t{ \"name\": \"user_lname\", \"display\": \"Surname\", \"type\": \"text\", \"mandatory\": true },\n\t\t{ \"name\": \"user_email\", \"display\": \"Email\", \"type\": \"text\", \"mandatory\": false },\n\t\t{ \"name\": \"user_user_pics\", \"display\": \"User Photo\", \"type\": \"picture\" },\n\t]\n}\n\nconst styles = theme => ({\n\troot: {\n\t\tdisplay: 'flex',\n\t\talignItems: 'center',\n\t},\n\twrapper: {\n\t\tmargin: theme.spacing.unit,\n\t\tposition: 'relative',\n\t},\n\tbuttonSuccess: {\n\t\tbackgroundColor: green[500],\n\t\t'&:hover': {\n\t\t\tbackgroundColor: green[700],\n\t\t},\n\t},\n\n\tbuttonFailed: {\n\t\tbackgroundColor: red[500],\n\t\t'&:hover': {\n\t\t\tbackgroundColor: red[700],\n\t\t},\n\t},\n\tfabProgress: {\n\t\tcolor: green[500],\n\t\tposition: 'absolute',\n\t\tright: 20,\n\t\tbottom: 20,\n\t\tzIndex: 1,\n\t},\n\tbuttonProgress: {\n\t\tcolor: green[500],\n\t\tposition: 'absolute',\n\t\ttop: '50%',\n\t\tleft: '50%',\n\t\tmarginTop: -12,\n\t\tmarginLeft: -12,\n\t},\n});\nconst NORMAL = 0;\nconst LOADING = 1;\nconst SAVING = 2;\nconst ERROR = 3;\nconst SAVED = 4;\n\n\nclass Settings extends React.Component {\n\tstate = {\n\t\topen: false,\n\t\tuser: {},\n\t\tsettings: {},\n\t\tnewPass: \"\",\n\t\treenterPass: \"\",\n\t\tstatusDetails: NORMAL,\n\t\tstatusCompany: NORMAL,\n\t\tvalidating: false,\n\t\tvalidatingUser: false,\n\t};\n\n\tvalidating = (name, status) => {\n\t\tif (!this.validate) {\n\t\t\tthis.validate = { \"personal\": undefined, \"company\": false }\n\t\t}\n\t\tthis.validate[name] = status;\n\t}\n\n\tcomponentDidMount = () => {\n\t\tthis.props.loadUserSettings();\n\t}\n\n\tcomponentWillUnmount = () => {\n\t\tconsole.log(\"Unmounted\");\n\t}\n\n\tcomponentWillReceiveProps = (props) => {\n\t\tconsole.log(props);\n\t\tconsole.log(this.state);\n\t\tif (props.profile && (!this.props.profile || !this.state.user.user_id)) {\n\t\t\tthis.setState({ user: props.profile.user, settings: props.profile.settings })\n\t\t\tlet userValid = true;\n\t\t\tlet companyValid = false;\n\t\t\tif (props.profile.settings.sett_company_name) {\n\t\t\t\tcompanyValid = true;\n\t\t\t}\n\n\t\t\tthis.validate = { personal: userValid, company: companyValid };\n\t\t}\n\n\t\tif (props.success && (this.state.statusDetails === SAVING || this.state.statusCompany === SAVING)) {\n\t\t\t// message\n\t\t\tswal(\n\t\t\t\t'Saved!',\n\t\t\t\t'Your Settings have been Saved successfully.',\n\t\t\t\t'success'\n\t\t\t)\n\t\t}\n\n\t\tif (!props.success && (this.state.statusDetails === SAVING || this.state.statusCompany === SAVING)) {\n\t\t\t// message\n\t\t\tswal(\n\t\t\t\t'Failed to Save!',\n\t\t\t\t'Your Settings have not been saved. Error was ' + props.message,\n\t\t\t\t'error'\n\t\t\t)\n\t\t}\n\n\t\tif (this.state.statusCompany === SAVING && props.success) {\n\t\t\tthis.setState({statusCompany : SAVED});\n\t\t}\n\n\t\tif (this.state.statusDetails === SAVING && props.success) {\n\t\t\tthis.setState({statusDetails : SAVED});\n\t\t}\n\n\t\tif (this.state.statusDetails === SAVING && !props.success && props.message) {\n\t\t\tthis.setState({statusDetails : ERROR})\n\t\t}\n\n\t\tif (this.state.statusCompany === SAVING && !props.success && props.message) {\n\t\t\tthis.setState({statusCompany : ERROR})\n\t\t}\n\t}\n\n\thandleClose = () => {\n\t};\n\n\thandleUpdate = (name, value) => {\n\t\tthis.state.user[name] = value\n\t}\n\n\thandleUpdateCompany = (name, value) => {\n\t\tthis.state.settings[name] = value\n\t}\n\n\thandleSave = () => {\n\t\t// company SAVE\n\t\t// company validation is important\n\t\t// personal default is valid; but if they change it can be invalid\n\t\t// without change, personal becomes valid (undefined) so we check false\n\t\tif (!this.validate || !this.validate[\"company\"]) {\n\t\t\tthis.setState({ validating: true });\n\t\t\treturn;\n\t\t}\n\t\telse {\n\t\t\t// good to save\t\t\t\n\t\t\tthis.setState({ statusCompany: SAVING });\n\t\t\t// save company details\n\t\t\tthis.props.saveCompanySettings(this.state.settings);\n\t\t}\n\t}\n\n\thandleSaveUser = () => {\n\t\t// company validation is important\n\t\t// personal default is valid; but if they change it can be invalid\n\t\t// without change, personal becomes valid (undefined) so we check false\n\t\tif (this.validate && this.validate[\"personal\"] == false) {\n\t\t\tthis.setState({ validatingUser: true, validatingUser: false });\n\t\t\treturn;\n\t\t}\n\t\telse {\n\t\t\tif (this.state.newPass !== this.state.reenterPass) {\n\t\t\t\tthis.setState({ validatingUser: true });\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.setState({ statusDetails: SAVING, validatingUser: false });\n\t\t\t// save user details\n\t\t\tif (this.state.newPass !== \"\") {\n\t\t\t\tthis.state.user.user_password = this.state.newPass;\n\t\t\t}\n\t\t\tthis.props.saveUserSettings(this.state.user);\n\t\t}\n\t}\n\n\trender() {\n\n\t\tlet loading = this.state.statusCompany === LOADING || this.state.statusDetails === LOADING ||\n\t\t\tthis.state.statusCompany === SAVING || this.state.statusDetails === SAVING;\n\n\t\tlet success = this.state.statusCompany === SAVED;\n\t\tlet successSettings = this.state.statusDetails === SAVED;\n\n\t\tlet error = this.state.statusCompany === ERROR;\n\t\tlet errorSettings = this.state.statusDetails === ERROR;\n\n\t\tconst { classes } = this.props;\n\t\tconst buttonClassname = classNames({\n\t\t\t[classes.buttonSuccess]: success,\n\t\t});\n\n\t\treturn (<LayoutWrapper>\n\t\t\t<FullColumn>\n\t\t\t\t<h3>Personal</h3>\n\t\t\t\t<FormEditView config={users} open={this.state.open}\n\t\t\t\t\tname=\"personal\"\n\t\t\t\t\tupdateError={this.state.error}\n\t\t\t\t\tupdateSuccess={this.state.saved}\n\t\t\t\t\tmessage={this.state.message}\n\t\t\t\t\tnotifyValid={this.validating}\n\n\t\t\t\t\tvalidating={this.state.validatingUser}\n\t\t\t\t\tonClose={this.handleClose}\n\t\t\t\t\tonUpdate={this.handleUpdate}\n\t\t\t\t\tupdateValue={this.handleUpdate}\n\t\t\t\t\tdata={this.state.user}\n\t\t\t\t\tisPanel={true}\n\t\t\t\t/>\n\t\t\t</FullColumn>\n\t\t\t<FullColumn>\n\t\t\t\t<h4>Password</h4>\n\t\t\t\t<TextField\n\t\t\t\t\tid=\"newpass\"\n\t\t\t\t\tfullWidth\n\t\t\t\t\t//error={error}\n\t\t\t\t\tlabel={\"New Password\"}\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\tonChange={e => { this.setState({ newPass: e.target.value }) }}\n\t\t\t\t\tvalue={this.state.newPass}\n\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\tshrink: true,\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\t<TextField\n\t\t\t\t\tid=\"reeneterpass\"\n\t\t\t\t\tfullWidth\n\t\t\t\t\terror={this.state.newPass !== this.state.reenterPass}\n\t\t\t\t\tlabel={\"Re-enter Password\"}\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\tonChange={e => { this.setState({ reenterPass: e.target.value }) }}\n\t\t\t\t\tvalue={this.state.reenterPass}\n\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\tshrink: true,\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</FullColumn>\n\t\t\t<FullColumn>\n\t\t\t\t<div style={{ position: \"relative\" }}>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tstyle={{ marginTop: \"6px\", marginLeft: \"6px\" }}\n\t\t\t\t\t\tvariant=\"fab\"\n\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\tclassName={buttonClassname}\n\t\t\t\t\t\tonClick={this.handleSaveUser}\n\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t>\n\t\t\t\t\t\t{successSettings ? <CheckIcon /> : (errorSettings ? <CrossIcon /> : <SaveIcon />)}\n\t\t\t\t\t</Button>\n\n\t\t\t\t\t{loading && <CircularProgress size={68} className={classes.fabProgress} style={{ left: \"0px\", bottom: \"unset\" }} />}\n\t\t\t\t</div>\n\t\t\t</FullColumn>\n\t\t\t<FullColumn>\n\t\t\t\t<h3>Company</h3>\n\t\t\t\t<FormEditView config={settings} open={this.state.open}\n\t\t\t\t\tname=\"company\"\n\t\t\t\t\tupdateError={this.state.error}\n\t\t\t\t\tupdateSuccess={this.state.saved}\n\t\t\t\t\tmessage={this.state.message}\n\t\t\t\t\tnotifyValid={this.validating}\n\t\t\t\t\tupdateValue={this.handleUpdateCompany}\n\n\t\t\t\t\tonClose={this.handleClose}\n\t\t\t\t\tonUpdate={this.handleUpdate}\n\t\t\t\t\tdata={this.state.settings}\n\t\t\t\t\tvalidating={this.state.validating}\n\t\t\t\t\tisPanel={true}\n\t\t\t\t/>\n\t\t\t</FullColumn>\n\n\t\t\t<FullColumn>\n\t\t\t\t<div style={{ position: \"relative\" }}>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tstyle={{ marginTop: \"6px\", marginLeft: \"6px\" }}\n\t\t\t\t\t\tvariant=\"fab\"\n\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\tclassName={buttonClassname}\n\t\t\t\t\t\tonClick={this.handleSave}\n\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t>\n\t\t\t\t\t\t{success ? <CheckIcon /> : (error ? <CrossIcon /> : <SaveIcon />)}\n\t\t\t\t\t</Button>\n\t\t\t\t\t{loading && <CircularProgress size={68} className={classes.fabProgress} style={{ left: \"0px\", bottom: \"unset\" }} />}\n\t\t\t\t</div>\n\t\t\t</FullColumn>\n\t\t</LayoutWrapper>\n\t\t)\n\t}\n};\n\nconst appConect = connect(\n\tstate => ({\n\t\t...state.MasterDetailsReducer,\n\t}),\n\t{ loadUserSettings, saveUserSettings, saveCompanySettings }\n)(Settings);\n\nexport default withStyles(styles)(appConect);\n\n"],"sourceRoot":""}