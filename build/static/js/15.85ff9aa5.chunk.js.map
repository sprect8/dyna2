{"version":3,"sources":["containers/Settings/index.js"],"names":["loadUserSettings","actions","saveUserSettings","saveCompanySettings","settings","tableName","displayName","key","display","description","columns","name","type","sequence","mandatory","unique","disabled","lov","users","NORMAL","SAVING","ERROR","SAVED","Settings","state","open","user","newPass","reenterPass","statusDetails","statusCompany","validating","validatingUser","status","_this","validate","personal","undefined","company","componentDidMount","props","componentWillUnmount","console","log","componentWillReceiveProps","profile","user_id","setState","companyValid","sett_company_name","success","swal","message","handleClose","handleUpdate","value","handleUpdateCompany","handleSave","handleSaveUser","Object","defineProperty","user_password","_this2","this","loading","successSettings","error","errorSettings","classes","buttonClassname","classNames","buttonSuccess","react_default","a","createElement","layoutWrapper","rowColumn","formedit","config","updateError","updateSuccess","saved","notifyValid","onClose","onUpdate","updateValue","data","isPanel","TextField_default","id","fullWidth","label","onChange","e","target","InputLabelProps","shrink","style","position","uielements_button","marginTop","marginLeft","variant","color","className","onClick","Check_default","Cancel_default","Save_default","CircularProgress_default","size","fabProgress","left","bottom","React","Component","appConect","connect","objectSpread","MasterDetailsReducer","withStyles","theme","root","alignItems","wrapper","margin","spacing","unit","backgroundColor","green","&:hover","buttonFailed","red","right","zIndex","buttonProgress","top"],"mappings":"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","file":"static/js/15.85ff9aa5.chunk.js","sourcesContent":["import React from 'react';\r\nimport LayoutWrapper from '../../components/utility/layoutWrapper';\r\nimport { FullColumn } from '../../components/utility/rowColumn';\r\nimport Button from '../../components/uielements/button';\r\nimport Icon from '../../components/uielements/icon';\r\nimport swal from 'sweetalert2';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport green from '@material-ui/core/colors/green';\r\nimport red from '@material-ui/core/colors/red';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport CrossIcon from '@material-ui/icons/Cancel';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport FormEditView from '../../components/masterdetail/formedit';\r\n\r\n\r\nimport 'react-vertical-timeline-component/style.min.css';\r\nimport actions from '../../redux/masterdetails/actions';\r\nimport { connect } from 'react-redux';\r\nimport classNames from 'classnames';\r\nimport { TextField } from '@material-ui/core';\r\n\r\n/**\r\n * This tool is for data entry into the system based on an underlying database model \r\n **/\r\n\r\nconst { loadUserSettings, saveUserSettings, saveCompanySettings } = actions;\r\n\r\n/**\r\n * Username First Name Last Name\r\n * Company Name Company Industry\r\n * Company Motto Company Phone Company Email\r\n * Company Logo\r\n * \r\n * Password settings\r\n */\r\n\r\nconst settings = {\r\n\t\"tableName\": \"settings\",\r\n\t\"displayName\": \"Settings table\",\r\n\t\"key\": \"cate_id\",\r\n\t\"display\": \"cate_name\",\r\n\t\"description\": \"Settings Table\",\r\n\t\"columns\": [\r\n\t\t{ \"name\": \"sett_id\", \"display\": \"Setting ID\", \"type\": \"number\", \"sequence\": \"cate_id_seq\", \"mandatory\": true, \"unique\": true, \"key\": true },\r\n\t\t{ \"name\": \"sett_user_id\", \"display\": \"User ID\", \"type\": \"number\", \"mandatory\": true, \"unique\": true, \"disabled\": true },\r\n\t\t{ \"name\": \"sett_company_name\", \"display\": \"Company Name\", \"type\": \"text\", \"mandatory\": true },\r\n\t\t{ \"name\": \"sett_company_logo\", \"display\": \"Logo\", \"type\": \"picture\" },\r\n\t\t{ \"name\": \"sett_company_motto\", \"display\": \"Motto\", \"type\": \"text\" },\r\n\t\t{ \"name\": \"sett_company_email\", \"display\": \"Email\", \"type\": \"text\" },\r\n\t\t{ \"name\": \"sett_company_phone\", \"display\": \"Phone\", \"type\": \"text\" },\r\n\t\t{ \"name\": \"sett_indt_id\", \"display\": \"Industry\", \"type\": \"text\", \"lov\": [\"Food and Beverage\", \"Clothing\", \"Local Spa\", \"Beauty Products\", \"Retail\"] }\r\n\t]\r\n}\r\n\r\nconst users = {\r\n\t\"tableName\": \"users\",\r\n\t\"displayName\": \"Users Records\",\r\n\t\"description\": \"System User\",\r\n\t\"columns\": [\r\n\t\t{ \"name\": \"user_id\", \"display\": \"User Id\", \"type\": \"number\", \"sequence\": \"user_id_seq\", \"mandatory\": true, \"unique\": true, \"key\": true },\r\n\t\t{ \"name\": \"user_fname\", \"display\": \"First Name\", \"type\": \"text\", \"mandatory\": true },\r\n\t\t{ \"name\": \"user_lname\", \"display\": \"Surname\", \"type\": \"text\", \"mandatory\": true },\r\n\t\t{ \"name\": \"user_email\", \"display\": \"Email\", \"type\": \"text\", \"mandatory\": false },\r\n\t\t{ \"name\": \"user_user_pics\", \"display\": \"User Photo\", \"type\": \"picture\" },\r\n\t]\r\n}\r\n\r\nconst styles = theme => ({\r\n\troot: {\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'center',\r\n\t},\r\n\twrapper: {\r\n\t\tmargin: theme.spacing.unit,\r\n\t\tposition: 'relative',\r\n\t},\r\n\tbuttonSuccess: {\r\n\t\tbackgroundColor: green[500],\r\n\t\t'&:hover': {\r\n\t\t\tbackgroundColor: green[700],\r\n\t\t},\r\n\t},\r\n\r\n\tbuttonFailed: {\r\n\t\tbackgroundColor: red[500],\r\n\t\t'&:hover': {\r\n\t\t\tbackgroundColor: red[700],\r\n\t\t},\r\n\t},\r\n\tfabProgress: {\r\n\t\tcolor: green[500],\r\n\t\tposition: 'absolute',\r\n\t\tright: 20,\r\n\t\tbottom: 20,\r\n\t\tzIndex: 1,\r\n\t},\r\n\tbuttonProgress: {\r\n\t\tcolor: green[500],\r\n\t\tposition: 'absolute',\r\n\t\ttop: '50%',\r\n\t\tleft: '50%',\r\n\t\tmarginTop: -12,\r\n\t\tmarginLeft: -12,\r\n\t},\r\n});\r\nconst NORMAL = 0;\r\nconst LOADING = 1;\r\nconst SAVING = 2;\r\nconst ERROR = 3;\r\nconst SAVED = 4;\r\n\r\n\r\nclass Settings extends React.Component {\r\n\tstate = {\r\n\t\topen: false,\r\n\t\tuser: {},\r\n\t\tsettings: {},\r\n\t\tnewPass: \"\",\r\n\t\treenterPass: \"\",\r\n\t\tstatusDetails: NORMAL,\r\n\t\tstatusCompany: NORMAL,\r\n\t\tvalidating: false,\r\n\t\tvalidatingUser: false,\r\n\t};\r\n\r\n\tvalidating = (name, status) => {\r\n\t\tif (!this.validate) {\r\n\t\t\tthis.validate = { \"personal\": undefined, \"company\": false }\r\n\t\t}\r\n\t\tthis.validate[name] = status;\r\n\t}\r\n\r\n\tcomponentDidMount = () => {\r\n\t\tthis.props.loadUserSettings();\r\n\t}\r\n\r\n\tcomponentWillUnmount = () => {\r\n\t\tconsole.log(\"Unmounted\");\r\n\t}\r\n\r\n\tcomponentWillReceiveProps = (props) => {\r\n\t\tconsole.log(props);\r\n\t\tconsole.log(this.state);\r\n\t\tif (props.profile && (!this.props.profile || !this.state.user.user_id)) {\r\n\t\t\tthis.setState({ user: props.profile.user, settings: props.profile.settings })\r\n\t\t\tlet userValid = true;\r\n\t\t\tlet companyValid = false;\r\n\t\t\tif (props.profile.settings.sett_company_name) {\r\n\t\t\t\tcompanyValid = true;\r\n\t\t\t}\r\n\r\n\t\t\tthis.validate = { personal: userValid, company: companyValid };\r\n\t\t}\r\n\r\n\t\tif (props.success && (this.state.statusDetails === SAVING || this.state.statusCompany === SAVING)) {\r\n\t\t\t// message\r\n\t\t\tswal(\r\n\t\t\t\t'Saved!',\r\n\t\t\t\t'Your Settings have been Saved successfully.',\r\n\t\t\t\t'success'\r\n\t\t\t)\r\n\t\t}\r\n\r\n\t\tif (!props.success && (this.state.statusDetails === SAVING || this.state.statusCompany === SAVING)) {\r\n\t\t\t// message\r\n\t\t\tswal(\r\n\t\t\t\t'Failed to Save!',\r\n\t\t\t\t'Your Settings have not been saved. Error was ' + props.message,\r\n\t\t\t\t'error'\r\n\t\t\t)\r\n\t\t}\r\n\r\n\t\tif (this.state.statusCompany === SAVING && props.success) {\r\n\t\t\tthis.setState({statusCompany : SAVED});\r\n\t\t}\r\n\r\n\t\tif (this.state.statusDetails === SAVING && props.success) {\r\n\t\t\tthis.setState({statusDetails : SAVED});\r\n\t\t}\r\n\r\n\t\tif (this.state.statusDetails === SAVING && !props.success && props.message) {\r\n\t\t\tthis.setState({statusDetails : ERROR})\r\n\t\t}\r\n\r\n\t\tif (this.state.statusCompany === SAVING && !props.success && props.message) {\r\n\t\t\tthis.setState({statusCompany : ERROR})\r\n\t\t}\r\n\t}\r\n\r\n\thandleClose = () => {\r\n\t};\r\n\r\n\thandleUpdate = (name, value) => {\r\n\t\tthis.state.user[name] = value\r\n\t}\r\n\r\n\thandleUpdateCompany = (name, value) => {\r\n\t\tthis.state.settings[name] = value\r\n\t}\r\n\r\n\thandleSave = () => {\r\n\t\t// company SAVE\r\n\t\t// company validation is important\r\n\t\t// personal default is valid; but if they change it can be invalid\r\n\t\t// without change, personal becomes valid (undefined) so we check false\r\n\t\tif (!this.validate || !this.validate[\"company\"]) {\r\n\t\t\tthis.setState({ validating: true });\r\n\t\t\treturn;\r\n\t\t}\r\n\t\telse {\r\n\t\t\t// good to save\t\t\t\r\n\t\t\tthis.setState({ statusCompany: SAVING });\r\n\t\t\t// save company details\r\n\t\t\tthis.props.saveCompanySettings(this.state.settings);\r\n\t\t}\r\n\t}\r\n\r\n\thandleSaveUser = () => {\r\n\t\t// company validation is important\r\n\t\t// personal default is valid; but if they change it can be invalid\r\n\t\t// without change, personal becomes valid (undefined) so we check false\r\n\t\tif (this.validate && this.validate[\"personal\"] == false) {\r\n\t\t\tthis.setState({ validatingUser: true, validatingUser: false });\r\n\t\t\treturn;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (this.state.newPass !== this.state.reenterPass) {\r\n\t\t\t\tthis.setState({ validatingUser: true });\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.setState({ statusDetails: SAVING, validatingUser: false });\r\n\t\t\t// save user details\r\n\t\t\tif (this.state.newPass !== \"\") {\r\n\t\t\t\tthis.state.user.user_password = this.state.newPass;\r\n\t\t\t}\r\n\t\t\tthis.props.saveUserSettings(this.state.user);\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\r\n\t\tlet loading = this.state.statusCompany === LOADING || this.state.statusDetails === LOADING ||\r\n\t\t\tthis.state.statusCompany === SAVING || this.state.statusDetails === SAVING;\r\n\r\n\t\tlet success = this.state.statusCompany === SAVED;\r\n\t\tlet successSettings = this.state.statusDetails === SAVED;\r\n\r\n\t\tlet error = this.state.statusCompany === ERROR;\r\n\t\tlet errorSettings = this.state.statusDetails === ERROR;\r\n\r\n\t\tconst { classes } = this.props;\r\n\t\tconst buttonClassname = classNames({\r\n\t\t\t[classes.buttonSuccess]: success,\r\n\t\t});\r\n\r\n\t\treturn (<LayoutWrapper>\r\n\t\t\t<FullColumn>\r\n\t\t\t\t<h3>Personal</h3>\r\n\t\t\t\t<FormEditView config={users} open={this.state.open}\r\n\t\t\t\t\tname=\"personal\"\r\n\t\t\t\t\tupdateError={this.state.error}\r\n\t\t\t\t\tupdateSuccess={this.state.saved}\r\n\t\t\t\t\tmessage={this.state.message}\r\n\t\t\t\t\tnotifyValid={this.validating}\r\n\r\n\t\t\t\t\tvalidating={this.state.validatingUser}\r\n\t\t\t\t\tonClose={this.handleClose}\r\n\t\t\t\t\tonUpdate={this.handleUpdate}\r\n\t\t\t\t\tupdateValue={this.handleUpdate}\r\n\t\t\t\t\tdata={this.state.user}\r\n\t\t\t\t\tisPanel={true}\r\n\t\t\t\t/>\r\n\t\t\t</FullColumn>\r\n\t\t\t<FullColumn>\r\n\t\t\t\t<h4>Password</h4>\r\n\t\t\t\t<TextField\r\n\t\t\t\t\tid=\"newpass\"\r\n\t\t\t\t\tfullWidth\r\n\t\t\t\t\t//error={error}\r\n\t\t\t\t\tlabel={\"New Password\"}\r\n\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\tonChange={e => { this.setState({ newPass: e.target.value }) }}\r\n\t\t\t\t\tvalue={this.state.newPass}\r\n\t\t\t\t\tInputLabelProps={{\r\n\t\t\t\t\t\tshrink: true,\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t\t<TextField\r\n\t\t\t\t\tid=\"reeneterpass\"\r\n\t\t\t\t\tfullWidth\r\n\t\t\t\t\terror={this.state.newPass !== this.state.reenterPass}\r\n\t\t\t\t\tlabel={\"Re-enter Password\"}\r\n\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\tonChange={e => { this.setState({ reenterPass: e.target.value }) }}\r\n\t\t\t\t\tvalue={this.state.reenterPass}\r\n\t\t\t\t\tInputLabelProps={{\r\n\t\t\t\t\t\tshrink: true,\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t</FullColumn>\r\n\t\t\t<FullColumn>\r\n\t\t\t\t<div style={{ position: \"relative\" }}>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tstyle={{ marginTop: \"6px\", marginLeft: \"6px\" }}\r\n\t\t\t\t\t\tvariant=\"fab\"\r\n\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\tclassName={buttonClassname}\r\n\t\t\t\t\t\tonClick={this.handleSaveUser}\r\n\t\t\t\t\t\tdisabled={loading}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{successSettings ? <CheckIcon /> : (errorSettings ? <CrossIcon /> : <SaveIcon />)}\r\n\t\t\t\t\t</Button>\r\n\r\n\t\t\t\t\t{loading && <CircularProgress size={68} className={classes.fabProgress} style={{ left: \"0px\", bottom: \"unset\" }} />}\r\n\t\t\t\t</div>\r\n\t\t\t</FullColumn>\r\n\t\t\t<FullColumn>\r\n\t\t\t\t<h3>Company</h3>\r\n\t\t\t\t<FormEditView config={settings} open={this.state.open}\r\n\t\t\t\t\tname=\"company\"\r\n\t\t\t\t\tupdateError={this.state.error}\r\n\t\t\t\t\tupdateSuccess={this.state.saved}\r\n\t\t\t\t\tmessage={this.state.message}\r\n\t\t\t\t\tnotifyValid={this.validating}\r\n\t\t\t\t\tupdateValue={this.handleUpdateCompany}\r\n\r\n\t\t\t\t\tonClose={this.handleClose}\r\n\t\t\t\t\tonUpdate={this.handleUpdate}\r\n\t\t\t\t\tdata={this.state.settings}\r\n\t\t\t\t\tvalidating={this.state.validating}\r\n\t\t\t\t\tisPanel={true}\r\n\t\t\t\t/>\r\n\t\t\t</FullColumn>\r\n\r\n\t\t\t<FullColumn>\r\n\t\t\t\t<div style={{ position: \"relative\" }}>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tstyle={{ marginTop: \"6px\", marginLeft: \"6px\" }}\r\n\t\t\t\t\t\tvariant=\"fab\"\r\n\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\tclassName={buttonClassname}\r\n\t\t\t\t\t\tonClick={this.handleSave}\r\n\t\t\t\t\t\tdisabled={loading}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{success ? <CheckIcon /> : (error ? <CrossIcon /> : <SaveIcon />)}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t{loading && <CircularProgress size={68} className={classes.fabProgress} style={{ left: \"0px\", bottom: \"unset\" }} />}\r\n\t\t\t\t</div>\r\n\t\t\t</FullColumn>\r\n\t\t</LayoutWrapper>\r\n\t\t)\r\n\t}\r\n};\r\n\r\nconst appConect = connect(\r\n\tstate => ({\r\n\t\t...state.MasterDetailsReducer,\r\n\t}),\r\n\t{ loadUserSettings, saveUserSettings, saveCompanySettings }\r\n)(Settings);\r\n\r\nexport default withStyles(styles)(appConect);\r\n\r\n"],"sourceRoot":""}